<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no">
<title>Snake Game Full Screen</title>

<style>
html, body{
    margin:0;
    padding:0;
    overflow:hidden;
    height:100%;
    background:#222;
    color:white;
    text-align:center;
    font-family:Arial;
}

canvas{
    background:black;
    display:block;
    margin:auto;
    border:none;
    touch-action:none;
}

.info{
    font-size:18px;
    padding:5px;
}

button{
    padding:8px 12px;
    font-size:15px;
    margin:2px;
}
</style>
</head>

<body>

<div class="info">
Score: <span id="score">0</span> |
High Score: <span id="highScore">0</span>
</div>

<canvas id="game"></canvas>

<div>
<button onclick="setSpeed(200)">üê¢</button>
<button onclick="setSpeed(150)">üôÇ</button>
<button onclick="setSpeed(80)">‚ö°</button>
<button onclick="restartGame()">üîÑ</button>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
let box = 20;

// ---------- FULL SCREEN ----------
function resizeCanvas(){
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight - 120;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

// ---------- VARIABLES ----------
let snake, food, direction;
let score = 0;
let game, gameInterval = 150;

// ---------- HIGH SCORE ----------
let highScore = localStorage.getItem("snakeHighScore") || 0;
document.getElementById("highScore").innerHTML = highScore;

function updateHighScore(){
    if(score > highScore){
        highScore = score;
        localStorage.setItem("snakeHighScore", highScore);
        document.getElementById("highScore").innerHTML = highScore;
    }
}

// ---------- SNAKE ----------
function newSnake(){
    snake = [{x:box*5, y:box*5}];
    direction = "RIGHT";
}

// ---------- FOOD ----------
function randomFood(){
    return {
        x: Math.floor(Math.random()*(canvas.width/box))*box,
        y: Math.floor(Math.random()*(canvas.height/box))*box
    };
}

// ---------- START ----------
function startGame(){
    score = 0;
    newSnake();
    food = randomFood();
    document.getElementById("score").innerHTML = score;
    clearInterval(game);
    game = setInterval(draw, gameInterval);
}

// ---------- SPEED ----------
function setSpeed(speed){
    gameInterval = speed;
    clearInterval(game);
    game = setInterval(draw, gameInterval);
}

// ---------- KEYBOARD ----------
document.addEventListener("keydown", e=>{
    if(e.keyCode==37 && direction!="RIGHT") direction="LEFT";
    if(e.keyCode==38 && direction!="DOWN") direction="UP";
    if(e.keyCode==39 && direction!="LEFT") direction="RIGHT";
    if(e.keyCode==40 && direction!="UP") direction="DOWN";
});

// ---------- MOBILE SWIPE ----------
let sx=0, sy=0;
canvas.addEventListener("touchstart", e=>{
    sx = e.touches[0].clientX;
    sy = e.touches[0].clientY;
});
canvas.addEventListener("touchend", e=>{
    let dx = e.changedTouches[0].clientX - sx;
    let dy = e.changedTouches[0].clientY - sy;

    if(Math.abs(dx)>Math.abs(dy)){
        if(dx>0 && direction!="LEFT") direction="RIGHT";
        else if(dx<0 && direction!="RIGHT") direction="LEFT";
    } else {
        if(dy>0 && direction!="UP") direction="DOWN";
        else if(dy<0 && direction!="DOWN") direction="UP";
    }
});

// ---------- DRAW ----------
function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    snake.forEach((s,i)=>{
        ctx.fillStyle = i==0 ? "lime" : "green";
        ctx.fillRect(s.x, s.y, box, box);
    });

    ctx.fillStyle="red";
    ctx.fillRect(food.x, food.y, box, box);

    let x = snake[0].x;
    let y = snake[0].y;

    if(direction=="LEFT") x-=box;
    if(direction=="RIGHT") x+=box;
    if(direction=="UP") y-=box;
    if(direction=="DOWN") y+=box;

    // üåç OPEN WORLD
    if(x<0) x = canvas.width-box;
    if(x>=canvas.width) x = 0;
    if(y<0) y = canvas.height-box;
    if(y>=canvas.height) y = 0;

    if(x==food.x && y==food.y){
        score++;
        document.getElementById("score").innerHTML = score;
        updateHighScore();
        food = randomFood();
    } else {
        snake.pop();
    }

    let head = {x,y};

    // üíÄ ONLY SELF COLLISION
    if(snake.some(p=>p.x==head.x && p.y==head.y)){
        alert("üíÄ Game Over");
        clearInterval(game);
        return;
    }

    snake.unshift(head);
}

// ---------- RESTART ----------
function restartGame(){
    startGame();
}

startGame();
</script>

</body>
</html>
